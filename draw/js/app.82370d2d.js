(function(t){function e(e){for(var i,s,o=e[0],r=e[1],h=e[2],u=0,v=[];u<o.length;u++)s=o[u],n[s]&&v.push(n[s][0]),n[s]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);l&&l(e);while(v.length)v.shift()();return c.push.apply(c,h||[]),a()}function a(){for(var t,e=0;e<c.length;e++){for(var a=c[e],i=!0,o=1;o<a.length;o++){var r=a[o];0!==n[r]&&(i=!1)}i&&(c.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},n={app:0},c=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var h=0;h<o.length;h++)e(o[h]);var l=r;c.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"10c1":function(t,e,a){},"21bb":function(t,e,a){"use strict";var i=a("bcc9"),n=a.n(i);n.a},"5c0b":function(t,e,a){"use strict";var i=a("5e27"),n=a.n(i);n.a},"5e27":function(t,e,a){},bcc9:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},c=[],s=(a("5c0b"),a("2877")),o={},r=Object(s["a"])(o,n,c,!1,null,null,null),h=r.exports,l=a("8c4f"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"drawpage"},[a("canvas",{directives:[{name:"show",rawName:"v-show",value:t.shotDraw,expression:"shotDraw"}],staticStyle:{"z-index":"5"},attrs:{id:"captureimg",width:t.shotsize.Width,height:t.shotsize.Height},on:{mousedown:function(e){return t.imgDown(e)},mouseup:function(e){return t.imgUp(e)},mousemove:function(e){return t.imgMove(e)},touchstart:function(e){return t.imgDown(e)},touchend:function(e){return t.imgUp(e)},touchmove:function(e){return t.imgMove(e)}}}),a("canvas",{attrs:{id:"canvasdraw",width:t.canvaSize.Width,height:t.canvaSize.Height},on:{mousedown:function(e){return t.canvasDown(e)},mouseup:function(e){return t.canvasUp(e)},mousemove:function(e){return t.canvasMove(e)},touchstart:function(e){return t.canvasDown(e)},touchend:function(e){return t.canvasUp(e)},touchmove:function(e){return t.canvasMove(e)}}}),a("div",{staticClass:"toolStyle scroll"},[a("i",{staticClass:"iconfont icon-tool5",attrs:{title:"截图"},on:{click:function(e){return t.screenShoot()}}}),a("i",{staticClass:"iconfont icon-zhaopianphoto177",attrs:{title:"保存画板"},on:{click:function(e){return t.drawShoot()}}}),a("div",{staticClass:"linewidth"},[a("div",{staticStyle:{height:"3px"},on:{click:function(e){t.context.lineWidth=1}}}),a("div",{staticStyle:{height:"5px","margin-top":"6px"},on:{click:function(e){t.context.lineWidth=4}}}),a("div",{staticStyle:{height:"8px","margin-top":"6px"},on:{click:function(e){t.context.lineWidth=8}}})]),t._l(t.colors,function(e,i){return a("i",{key:i,staticClass:"iconfont icon-qianbipencil86",style:e===t.canvasState.colorp?"color:"+e+";font-size:40px;":"color:"+e+";font-size:32px;",on:{click:function(a){return t.togglePen(e)}}})}),a("i",{staticClass:"iconfont icon-xiangpica",style:"rgba(255, 235, 59, 0)"===t.canvasState.colorp?";font-size:40px;":";font-size:32px;",attrs:{title:"橡皮檫"},on:{click:function(e){t.togglePen("rgba(255, 235, 59, 0)")}}}),t._l(t.graphArr,function(e,i){return a("i",{key:i+10,class:"iconfont icon-"+e[1],style:t.canvasState.canvascursor===e[1]?"color: #efb336":"",attrs:{title:e[0]},on:{click:function(a){return t.graphswitch(e[1])}}})}),a("i",{staticClass:"iconfont icon-ai207",attrs:{title:"撤销"},on:{click:function(e){return t.controlCanvas("prev")}}}),a("i",{staticClass:"iconfont icon-shanchu1",attrs:{title:"清空"},on:{click:function(e){return t.controlCanvas("clear")}}}),a("i",{staticClass:"iconfont icon-fanhui2",attrs:{title:"还原"},on:{click:function(e){return t.controlCanvas("restore")}}})],2),a("div",{staticClass:"drawimgStyle scroll"},t._l(t.drawimg,function(e,i){return a("img",{key:i,class:"restore"+i,attrs:{src:e},on:{click:function(e){return t.restore("restore"+i)}}})}),0)])},v=[],g={data:function(){return{shotDraw:!1,captureimg:{},screensize:[],colors:["#000000","#ff0000","#008000","#ffff00","#800080"],graphArr:[["线","line"],["矩形","square"],["圆","circle"],["圆规","compass"],["三角形","triangleone"],["三角形","triangletwo"]],shotsize:{Width:document.body.clientWidth,Height:document.body.clientHeight},canvaSize:{Width:document.body.clientWidth,Height:document.body.clientHeight},canvasState:{canvascursor:"crosshair",x:"",y:"",colorp:"#ffff00",time:-1,round:[]},context:{},middleAry:[],saveimgdata:{},drawimg:[],imgtemporary:""}},methods:{graphswitch:function(t){"rgba(255, 235, 59, 0)"===this.context.strokeStyle&&this.togglePen("#ffff00"),this.canvasState.canvascursor=t},restore:function(t){this.imgtemporary=document.getElementsByClassName(t)[0]},togglePen:function(t){(this.canvasState.colorp===t||"rgba(255, 235, 59, 0)"===t)&&(this.canvasState.canvascursor="crosshair"),this.canvasState.colorp=t,this.context.strokeStyle=t,this.context.shadowColor=t},drawShoot:function(t){var e;if(t){e=document.createElement("canvas");var a=e.getContext("2d");e.width=t.width,e.height=t.height,a.putImageData(t,0,0)}else e=document.querySelector("#canvasdraw");var i=e.toDataURL("image/png");10===this.drawimg.length&&this.drawimg.shift(),this.drawimg.push(i)},graphClearn:function(){this.context.beginPath(),this.context.clearRect(0,0,this.canvaSize.Width,this.canvaSize.Height),this.context.putImageData(this.middleAry[this.middleAry.length-1],0,0)},canvasMove:function(t){var e=t.clientX?t.clientX:t.changedTouches[0].clientX,a=t.clientY?t.clientY:t.changedTouches[0].clientY;if(this.canvasState.x)if(this.imgtemporary)this.graphClearn(),this.context.drawImage(this.imgtemporary,this.canvasState.x,this.canvasState.y,e-this.canvasState.x,a-this.canvasState.y),this.context.stroke();else switch(this.canvasState.canvascursor){case"crosshair":var i=10*this.context.lineWidth;"rgba(255, 235, 59, 0)"===this.context.strokeStyle&&this.context.clearRect(e-i/2,a-i/2,i,i),this.context.lineTo(e,a),this.context.stroke();break;case"line":this.graphClearn(),this.context.moveTo(this.canvasState.x,this.canvasState.y),this.context.lineTo(e,a),this.context.stroke();break;case"square":this.graphClearn(),this.context.strokeRect(this.canvasState.x,this.canvasState.y,e-this.canvasState.x,a-this.canvasState.y),this.context.stroke();break;case"circle":this.graphClearn();var n=Math.sqrt((e-this.canvasState.x)*(e-this.canvasState.x)+(a-this.canvasState.y)*(a-this.canvasState.y));this.context.arc(this.canvasState.x,this.canvasState.y,n,0,2*Math.PI,!1),this.context.stroke();break;case"compass":if(this.graphClearn(),0===this.canvasState.round.length)this.context.moveTo(this.canvasState.x,this.canvasState.y),this.context.lineTo(e,a),this.context.stroke();else{var c=(a-this.canvasState.round[0])/10;this.context.arc(this.canvasState.x,this.canvasState.y,this.canvasState.round[1],0,c,c<0),this.context.stroke()}break;case"triangleone":this.graphClearn(),this.context.moveTo(this.canvasState.x,this.canvasState.y),this.context.lineTo(e,a),this.context.lineTo(this.canvasState.x,a),this.context.closePath(),this.context.stroke();break;case"triangletwo":this.graphClearn(),this.context.moveTo(this.canvasState.x,this.canvasState.y),this.context.lineTo(e,a),this.context.lineTo(this.canvasState.x-(e-this.canvasState.x),a),this.context.closePath(),this.context.stroke();break}},canvasUp:function(t){var e=t.clientX?t.clientX:t.changedTouches[0].clientX,a=t.clientY?t.clientY:t.changedTouches[0].clientY;this.context.beginPath(),"compass"===this.canvasState.canvascursor?0===this.canvasState.round.length?this.canvasState.round=[a,Math.sqrt((e-this.canvasState.x)*(e-this.canvasState.x)+(a-this.canvasState.y)*(a-this.canvasState.y))]:(this.canvasState.round=[],this.canvasState.x="",this.canvasState.y=""):(this.canvasState.x="",this.canvasState.y=""),this.imgtemporary=""},canvasDown:function(t){this.canvasSave();var e=t.clientX?t.clientX:t.changedTouches[0].clientX,a=t.clientY?t.clientY:t.changedTouches[0].clientY;if(0===this.canvasState.round.length&&(this.canvasState.x=e,this.canvasState.y=a),!this.imgtemporary){this.context.moveTo(e,a);var i=10*this.context.lineWidth;"rgba(255, 235, 59, 0)"===this.context.strokeStyle&&this.context.clearRect(e-i/2,a-i/2,i,i)}},screenShoot:function(){this.shotDraw=!0,this.captureimg.beginPath(),this.captureimg.clearRect(0,0,this.canvaSize.Width,this.canvaSize.Height),this.captureimg.fillRect(0,0,this.canvaSize.Width,this.canvaSize.Height),this.captureimg.stroke()},imgDown:function(t){var e=t.clientX?t.clientX:t.changedTouches[0].clientX,a=t.clientY?t.clientY:t.changedTouches[0].clientY;this.screensize=[e,a]},imgMove:function(t){if(2===this.screensize.length){var e=t.clientX?t.clientX:t.changedTouches[0].clientX,a=t.clientY?t.clientY:t.changedTouches[0].clientY;this.captureimg.clearRect(0,0,this.canvaSize.Width,this.canvaSize.Height),this.captureimg.beginPath(),this.captureimg.fillRect(0,0,this.canvaSize.Width,this.canvaSize.Height),this.captureimg.clearRect(this.screensize[0],this.screensize[1],e-this.screensize[0],a-this.screensize[1]),this.captureimg.stroke()}},imgUp:function(t){var e=this.screensize,a=(t.clientX?t.clientX:t.changedTouches[0].clientX)-e[0],i=(t.clientY?t.clientY:t.changedTouches[0].clientY)-e[1];this.shotDraw=!1,this.screensize=[];var n=this.context.getImageData(e[0],e[1],a,i);this.drawShoot(n)},canvasSave:function(){var t=this.context.getImageData(0,0,this.canvaSize.Width,this.canvaSize.Height);4===this.middleAry.length&&this.middleAry.shift(),this.canvasState.time=this.middleAry.length+1,this.middleAry.push(t)},controlCanvas:function(t){switch(t){case"prev":0!==this.canvasState.time&&(this.canvasState.time--,this.context.clearRect(0,0,this.canvaSize.Width,this.canvaSize.Height),this.context.putImageData(this.middleAry[this.canvasState.time],0,0),this.context.beginPath());break;case"next":this.canvasState.time!==this.middleAry.length-1&&(this.canvasState.time++,this.context.clearRect(0,0,this.canvaSize.Width,this.canvaSize.Height),this.context.putImageData(this.middleAry[this.canvasState.time],0,0),this.context.beginPath());break;case"clear":this.saveimgdata=this.context.getImageData(0,0,this.canvaSize.Width,this.canvaSize.Height),this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.beginPath(),this.canvasSave();break;case"restore":this.context.putImageData(this.saveimgdata,0,0),this.canvasSave();break}}},mounted:function(){var t=document.querySelector("#canvasdraw");this.context=t.getContext("2d");var e=this.context.getImageData(0,0,this.canvaSize.Width,this.canvaSize.Height);this.middleAry.push(e),this.context.lineWidth=4,this.context.shadowBlur=1,this.togglePen("#ffff00");var a=document.querySelector("#captureimg");this.captureimg=a.getContext("2d"),this.captureimg.fillStyle="rgba(0, 0, 0, 0.2)"}},d=g,f=(a("21bb"),Object(s["a"])(d,u,v,!1,null,null,null)),m=f.exports;i["a"].use(l["a"]);var p=new l["a"]({routes:[{path:"/",name:"home",component:m}]}),S=a("2f62");i["a"].use(S["a"]);var x=new S["a"].Store({state:{},mutations:{},actions:{}});a("10c1");i["a"].config.productionTip=!1,new i["a"]({router:p,store:x,render:function(t){return t(h)}}).$mount("#app")}});
//# sourceMappingURL=app.82370d2d.js.map